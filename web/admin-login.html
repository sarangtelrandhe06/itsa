<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Login - ITSA</title>
  <style>
    body { font-family: Arial, sans-serif; background:#dadada; margin:0; }
    header{ background:#8B0000; color:#fff; height:150px; display:flex; align-items:center; justify-content:space-between; padding:0 16px; box-sizing:border-box;}
    header img{ width:120px;height:120px;border-radius:50%; background:#fff; object-fit:cover; margin:15px;}
    header .title{flex:1; text-align:center;}
    nav{ width:100%; background:red; display:flex; justify-content:center; gap:12px; padding:14px 0; box-sizing:border-box; }
    nav a{ background:white; color:#8B0000; padding:8px 18px; border-radius:18px; text-decoration:none; font-weight:600; border:2px solid transparent; transition:.2s}
    nav a:hover{ background:#8B0000; color:#ffd700; border-color:white; }
    .login-box{ background:#fff; width:360px; margin:40px auto; padding:28px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,.12); }
    .login-box h2{ margin:0 0 12px 0; color:#2d3436; text-align:center;}
    .login-box label{ display:block; margin:10px 0 6px; color:#333; font-weight:600; }
    .login-box input{ width:100%; padding:10px; border-radius:6px; border:1px solid #bdbdbd; box-sizing:border-box; }
    .btn{ width:100%; padding:12px; background:green; color:white; border:none; border-radius:6px; margin-top:16px; cursor:pointer; font-weight:600;}
    .btn:hover{ background:lightgreen; color:#000 }
    .small{ font-size:13px; color:#333; margin-top:8px; text-align:center;}
  </style>
</head>
<body>

<header>
  <img src="logo MGICOET.jpg" alt="Mauli College Logo">
  <div class="title">
    <h1>ITSA Community Platform</h1>
    <p style="margin:0; color:white; font-size:14px">Admin Login</p>
  </div>
  <img src="logo.png" alt="ITSA Logo">
</header>

<nav>
  <a href="Itsa Platform.html">Home</a>
  <a href="events.html">Events</a>
  <a href="Alumni.html">Alumni</a>
  <a href="members.html">Members</a>
  <a href="Contactus.html">Contact Us</a>
  <a href="Aboutus.html">About Us</a>
  <a href="login.html">SignUp/SignIn</a>
</nav>

<div class="login-box">
  <h2>Admin Sign In</h2>

  <!-- Admin credentials: if no admin exists the page will create the initial admin with
       email: sarangtelrandhe2006@gmail.com
       password: sarang123
  -->
  <form id="adminLoginForm">
    <label for="email">Email</label>
    <input id="email" type="email" placeholder="admin@example.com" required>

    <label for="password">Password</label>
    <input id="password" type="password" placeholder="password" required>

    <button class="btn" type="submit">Sign In</button>
    <div class="small">If this is your first time, the initial admin will be created automatically.</div>
  </form>
</div>

<footer style="background:red;color:white;text-align:center;padding:10px 0; position:fixed; left:0; right:0; bottom:0;">
  © 2025 ITSA Mauli College | All Rights Reserved
</footer>

<script>
(function(){
  // Initial admin credentials (from your message)
  const INITIAL_ADMIN = { email: "sarangtelrandhe2006@gmail.com", password: "sarang123" };

  // Ensure admins array exists; if not, seed with INITIAL_ADMIN
  function ensureAdmins() {
    let admins = JSON.parse(localStorage.getItem("itsa_admins"));
    if (!admins || !Array.isArray(admins) || admins.length === 0) {
      admins = [ INITIAL_ADMIN ];
      localStorage.setItem("itsa_admins", JSON.stringify(admins));
    }
    return admins;
  }

  ensureAdmins();

  // Handle login
  document.getElementById("adminLoginForm").addEventListener("submit", function(e){
    e.preventDefault();
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;

    const admins = JSON.parse(localStorage.getItem("itsa_admins")) || [];

    const matched = admins.find(a => a.email.toLowerCase() === email.toLowerCase() && a.password === password);

    if (matched) {
      localStorage.setItem("itsa_current_admin", JSON.stringify(matched));
      // redirect to admin panel
      location.href = "admin.html";
    } else {
      alert("❌ Invalid admin credentials.");
    }
  });
})();
</script>
</body>
</html>
